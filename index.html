<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PurrGo 喵來速｜品牌官網 Demo</title>

  <!-- PWA / Icons（用相對路徑） -->
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./logo/favicon.png">
  <link rel="apple-touch-icon" sizes="192x192" href="./logo/logo-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="./logo/logo-512.png">
  <meta name="theme-color" content="#ff7f50">

  <!-- 站台樣式 -->
  <link rel="stylesheet" href="./style.css">

  <!-- Leaflet CSS -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin="anonymous">
</head>
<body>

<!-- 你的頁面內容（節錄重點段落） -->

<!-- Vet 健檢預約（補上 <form> 起始標籤與 onsubmit） -->
<section id="vet" class="card">
  <span class="pill">Vet</span>
  <h2 class="mt-0">合作獸醫預約（示範）</h2>
  <form class="grid g-2" onsubmit="return bookVet(event)">
    <div><label>貓咪暱稱<input class="input" required></label></div>
    <div><label>城市
      <select class="input">
        <option>台北</option><option>台中</option><option>高雄</option>
      </select>
    </label></div>
    <div class="gcol-2"><label>備註<textarea class="input"></textarea></label></div>
    <div class="inline"><button class="btn" type="submit">預約（示範）</button></div>
  </form>
  <div id="vetList" class="muted mt-1"></div>
</section>

<!-- Kiosk 地圖 -->
<section id="kiosk" class="card">
  <span class="pill">Kiosk</span>
  <h2 class="mt-0">販賣機點位</h2>
  <div id="map" style="height:360px;border-radius:12px;overflow:hidden"></div>
  <div class="muted mt-1">點擊標記可開啟 Google/Apple Maps 導航。</div>
</section>

<!-- Community 照片牆（本地示範） -->
<section id="community" class="card">
  <span class="pill">Community</span>
  <h2 class="mt-0">照片牆（本機示範）</h2>
  <div class="inline">
    <input type="file" accept="image/*" onchange="addPhoto(event)">
    <button class="btn secondary" onclick="clearWall()">清除所有照片（本機）</button>
  </div>
  <div id="wall" class="grid g-3 mt-2"></div>
</section>

<!-- Contact 聯絡我們 -->
<section id="contact" class="card">
  <span class="pill">Contact</span>
  <h2 class="mt-0">聯絡我們</h2>
  <form class="grid g-2" onsubmit="return submitForm(event)">
    <div><label>您的稱呼<input class="input" required></label></div>
    <div><label>Email<input type="email" class="input" required></label></div>
    <div class="gcol-2"><label>訊息<textarea class="input" required></textarea></label></div>
    <div class="inline"><button class="btn" type="submit">送出</button></div>
  </form>
  <p class="muted mt-1">也可來信：<a href="mailto:hello@purrgo.tw">hello@purrgo.tw</a> ｜ LINE 官方：@purrgo</p>
</section>

<footer class="container" style="padding:26px 0 60px;color:var(--muted)">
  © PurrGo 喵來速 ｜ 品牌主色 #ff7f50 ｜ 公開 Demo（不含投資人資訊）
</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin="anonymous"></script>

<!-- 你的原本腳本：改成相對路徑 ./data/... 與 ./sw.js -->
<script>
  // ===== 全域狀態（省略：保留你原本內容） =====

  // 讀產品／地點：改為相對路徑
  async function loadProducts(){
    try{
      const res = await fetch('./data/products.json',{cache:'no-cache'});
      const list = await res.json();
      const grid = document.getElementById('productGrid');
      if(!grid) return;
      grid.innerHTML='';
      list.forEach(p=>{
        const el = document.createElement('div'); el.className='card';
        el.innerHTML = `<h3 class="mt-0">${p.name}</h3>
          <div class="muted">規格：${p.spec}</div>
          <div class="mt-1"><b>NT$ ${p.price.toLocaleString()}</b></div>
          <ul class="list">${(p.bullets||[]).map(b=>`<li>${b}</li>`).join('')}</ul>
          <div class="inline mt-1">
            <button class="btn" onclick='addToCart(${JSON.stringify(p).replace(/'/g,"&#39;")})'>加入購物車</button>
          </div>`;
        grid.appendChild(el);
      });
    }catch(e){
      const grid = document.getElementById('productGrid');
      if(grid) grid.innerHTML='<div class="empty">讀取產品失敗</div>';
    }
  }

  async function initMap(){
    const map=L.map('map').setView([25.0330,121.5654],12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'© OpenStreetMap'}).addTo(map);
    try{
      const res = await fetch('./data/locations.json',{cache:'no-cache'});
      const points = await res.json();
      points.forEach(p=>{
        const m=L.marker([p.lat,p.lng]).addTo(map);
        const gLink = `https://www.google.com/maps?q=${p.lat},${p.lng}`;
        const aLink = `https://maps.apple.com/?q=${p.lat},${p.lng}`;
        m.bindPopup(`<b>${p.name}</b><br>${p.address||''}<br>
          <a href='${gLink}' target='_blank'>Google Maps</a> ｜ 
          <a href='${aLink}' target='_blank'>Apple Maps</a>`);
      });
    }catch(e){}
  }

  // 其餘函式（vip/guild/vet/photo/cart…）保留你原本內容即可

  // 啟動：把 service worker 改成相對路徑
<script>
  window.addEventListener('DOMContentLoaded', () => {
    // ... 你的其他初始化 ...
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js').catch(() => {});
    }
  });
</script>
</script>
</body>
</html>
