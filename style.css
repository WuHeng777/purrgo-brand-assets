:root{
  --bg:#0f1011; --bg-2:#151618; --text:#eaeaea; --muted:#9aa0a6;
  --brand:#ff7f50; --chip:#ffe0d3; --chip-text:#2b2b2b;
  --stroke:#222428; --stroke-2:#1d1f22;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,system-ui,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
  line-height:1.65;
}
a{color:inherit;text-decoration:none}

.container{max-width:1120px;margin:0 auto;padding:0 16px}
.page{padding:8px 0 40px}
.section-caption{font-size:.95rem;color:var(--muted);margin:6px 0 10px}
.footer{padding:26px 0 60px;color:var(--muted)}
.muted{color:var(--muted)}
.mt-0{margin-top:0}.mt-1{margin-top:1rem}.mt-2{margin-top:1.4rem}
.inline{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.space-between{justify-content:space-between}
.flex-1{flex:1}
.fullrow{width:100%}

/* Cards / pills / buttons / inputs */
.card{
  background:radial-gradient(130% 120% at 100% 0%,#1a1b1e 0%,#111214 60%);
  border:1px solid var(--stroke-2);border-radius:18px;padding:22px;
}
.pill{display:inline-block;background:var(--chip);color:var(--chip-text);padding:8px 14px;border-radius:999px;font-weight:800}
.btn{background:var(--brand);color:#191919;border:0;border-radius:14px;padding:12px 16px;font-weight:900}
.btn.secondary{background:#26282b;color:#ddd;border:1px solid var(--stroke)}
.btn.compact{height:34px;padding:6px 10px;border-radius:10px}
.input,select.input,textarea.input{width:100%;padding:14px;border-radius:12px;border:1px solid var(--stroke);background:#0f1113;color:var(--text)}
textarea.input{min-height:120px}
.empty{padding:22px;border:1px dashed var(--stroke);border-radius:14px;text-align:center;color:var(--muted)}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid var(--stroke);padding:.6rem .4rem;text-align:left}
.list{list-style:none;padding-left:1rem}
.list li{margin:.4rem 0}

/* Header */
header{position:sticky;top:0;z-index:80;background:linear-gradient(#0f1011cc,#0f1011cc);backdrop-filter:saturate(120%) blur(2px)}
.nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}
.brand img{width:28px;height:28px;border-radius:8px;object-fit:cover}
.chipbar{display:flex;align-items:center;gap:10px}
.chip{display:flex;align-items:center;gap:8px;height:48px;padding:0 16px;border-radius:16px;background:#212225;border:1px solid #2a2b2d}
.chip .sep{opacity:.35}

/* Hamburger + Drawer */
.menu-toggle{width:48px;height:48px;border-radius:14px;background:#232427;border:0;display:grid;place-items:center}
.menu-ico,.menu-ico::before,.menu-ico::after{content:"";display:block;width:22px;height:2px;background:#fff;border-radius:2px;position:relative}
.menu-ico::before{top:-6px;position:absolute}
.menu-ico::after{top:6px;position:absolute}

.menu{position:fixed;inset:0 0 0 auto;width:min(86vw,340px);transform:translateX(100%);
  transition:transform .25s ease;background:#0d0e10;z-index:2000;padding:16px;overflow:auto;border-left:1px solid var(--stroke)}
.menu.open{transform:none}
.menu a{display:block;padding:14px 16px;margin:10px 0;border-radius:14px;background:#1b1c1f;border:1px solid var(--stroke)}
.menu-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .2s;z-index:1500}
.menu-backdrop.show{opacity:1;pointer-events:auto}

/* Hero */
.hero{display:grid;grid-template-columns:1.2fr .9fr;gap:16px;align-items:center}
.hero-title{font-size:clamp(24px,5.6vw,40px);line-height:1.25;margin:.2rem 0 1rem;white-space:nowrap}
.hero-visual{display:flex;align-items:center;justify-content:center}
.hero-logo{width:min(54vw,220px);aspect-ratio:1/1;border-radius:20px;object-fit:cover;box-shadow:0 8px 20px rgba(0,0,0,.35)}
@media (max-width:900px){.hero{grid-template-columns:1fr}.hero-visual{justify-content:flex-end}}

/* Grid helpers */
.grid{display:grid}
.g-2{grid-template-columns:repeat(2,1fr);gap:14px}
.g-3{grid-template-columns:repeat(3,1fr);gap:14px}
.gcol-2{grid-column:span 2}
@media (max-width:900px){.g-2,.g-3{grid-template-columns:1fr}}

/* Products: horizontal scroll with arrows */
.hwrap{position:relative}
.hbtn{position:absolute;top:50%;transform:translateY(-50%);z-index:2;width:36px;height:36px;border-radius:50%;border:0;background:#202226;color:#ddd}
.hbtn.prev{left:-6px}.hbtn.next{right:-6px}
.hscroll{display:flex;gap:12px;overflow:auto;scroll-snap-type:x mandatory;padding-bottom:6px}
.product{min-width:280px;scroll-snap-align:start}
.prod-img{width:100%;height:180px;object-fit:cover;border-radius:14px;border:1px solid var(--stroke)}

/* Pets */
.p-row{display:flex;gap:12px;overflow:auto;padding:4px 2px}
.p-card{min-width:220px;display:flex;gap:12px;align-items:center;background:#17181b;border:1px solid var(--stroke);border-radius:14px;padding:10px}
.p-avatar{width:56px;height:56px;border-radius:12px;object-fit:cover;background:#0f1011}
.edit-btn{margin-left:auto}

/* Photos IG Grid */
#wall{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
#wall .tile{position:relative;aspect-ratio:1/1;border-radius:10px;overflow:hidden;border:1px solid var(--stroke);cursor:pointer}
#wall .tile img{width:100%;height:100%;object-fit:cover;display:block}

/* Chat */
.chatbox{height:360px;overflow:auto;border:1px solid var(--stroke);border-radius:14px;padding:10px;background:#0f1113}
.msg{padding:10px 12px;border-radius:12px;margin:6px 0;display:inline-block;max-width:88%}
.msg.me{background:#2a2b2f}.msg.other{background:#202124}

/* Video */
.video{width:100%;border-radius:12px}

/* Map */
.mapbox{height:360px;border-radius:12px;overflow:hidden;border:1px solid var(--stroke)}
.leaflet-container,.leaflet-pane,.leaflet-control{z-index:100}

/* Dialogs（深色/淺色皆無白邊） */
dialog{border:0;border-radius:18px;padding:0;max-width:min(92vw,560px);background:transparent}
dialog::backdrop{background:rgba(0,0,0,.55)}
.auth-outer{background:#0b0c0d;border:1px solid var(--stroke);padding:10px;border-radius:20px}
.auth-card{background:var(--bg-2);border:1px solid var(--stroke-2);border-radius:18px;padding:18px}
.auth-title{font-weight:900;font-size:1.4rem;margin:0 0 12px}
.pm-img{width:100%;border-radius:12px;object-fit:contain;max-height:60vh;background:#0c0d0e}
.pm-comments{max-height:180px;overflow:auto}
.nofocus{position:absolute;left:-9999px;width:1px;height:1px;opacity:0}

/* FAB */
.fab{position:fixed;right:14px;bottom:16px;z-index:90}
.fab-btn{width:66px;height:66px;border-radius:50%;
  background:linear-gradient(180deg,#ff8d63,#e56d3b);border:0;color:#181818;font-weight:900;
  box-shadow:0 10px 22px rgba(0,0,0,.35)}

/* Light mode adjustments */
@media (prefers-color-scheme: light){
  body{background:#fbfbfb;color:#222}
  .card{background:#fff;border-color:#eee}
  .menu{background:#fff}
  .menu a{background:#f3f4f6}
  .auth-outer{background:#f6f7f8;border-color:#e6e7ea}
  .auth-card{background:#fff;border-color:#e9e9ee}
  .auth-title{color:#111}
}
/* === Drawer 的最高優先權與安全區 === */
.menu{
  position: fixed;
  inset: 0 0 0 auto;               /* 右側抽屜 */
  width: min(86vw, 360px);
  transform: translateX(100%);
  transition: transform .25s ease;
  background: #0d0e10;
  overflow: auto;
  /* 安全區避免被瀏海/底部手勢遮住 */
  padding-top: max(16px, env(safe-area-inset-top));
  padding-bottom: max(16px, env(safe-area-inset-bottom));
  z-index: 10000;                  /* <<< 抽屜放最上層 */
}
.menu.open{ transform: none; }

.menu-backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.5);
  backdrop-filter: blur(2px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s;
  z-index: 9999;                   /* <<< 僅次於抽屜 */
}
.menu-backdrop.show{ opacity: 1; pointer-events: auto; }

/* 讓其他浮動件確定在抽屜之下 */
.fab{ z-index: 1200; }             /* Top 按鈕 */
header, .container, .card{ position: relative; z-index: auto; }

/* 若你有其它自訂很高的 z-index，請確保 < 9999 */
